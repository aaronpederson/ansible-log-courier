---
- name: Add apt repository
  command: add-apt-repository ppa:devel-k/log-courier

- name: Install Packages | apt
  apt:
    state: latest
    pkg: "{{ item }}"
    update_cache: yes
  with_items:
    - log-courier

- name: Upload public certificate
  template:
    src: log-courier.crt
    dest: /etc/log-courier/log-courier.crt

- name: Configure for forwarder
  notify: Reload Service | log-courier
  template:
    src: conf.d/forwarder.conf
    dest: /etc/log-courier/log-courier.conf

- name: Service log-courier start
  service:
    name: log-courier
    state: restarted
